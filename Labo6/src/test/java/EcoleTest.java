import static org.junit.jupiter.api.Assertions.assertLinesMatch;
import static org.junit.jupiter.api.Assertions.assertTrue;

import org.junit.jupiter.api.Test;

import java.io.ByteArrayOutputStream;
import java.io.PrintStream;

/**
 * Unit tests
 */
public class EcoleTest {
    /**
     * Test the output of the main program.
     */
    @Test
    public void outputTest() {
        final PrintStream standardOut = System.out;
        final ByteArrayOutputStream outputStreamCaptor = new ByteArrayOutputStream();

        System.setOut(new PrintStream(outputStreamCaptor));

              final String expected = """
                      -- Membres de l'ecole
                      
                      Prof. Pier Donini (PDO)
                      Prof. Daniel Rossier (DRE)
                      Etud. John Lennon (#1234) - IL6-1
                      Etud. Paul Mc Cartney (#2341) - IL6-1
                      Etud. Ringo Starr (#3241) - IL6-1
                      Etud. George Harisson (#4321) - IL6-1
                      Etud. Roger Waters (#1324) - SI6-1
                      Etud. David Gilmour (#4312) - SI6-1
                      
                      -- Horaire du groupe IL6-1 (4 etudiants)
                      
                           | Lun         | Mar         | Mer         | Jeu         | Ven         |
                           |-------------|-------------|-------------|-------------|-------------|
                       8:30|SYE   G01 DRE|             |             |             |             |
                           |             |-------------|-------------|-------------|-------------|
                       9:15|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      10:25|             |             |             |SYE   A09 DRE|             |
                           |-------------|-------------|-------------|             |-------------|
                      11:15|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      12:00|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      13:15|             |             |POO   H02 PDO|POO   H02 PDO|             |
                           |-------------|-------------|             |             |-------------|
                      14:00|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      14:55|             |             |             |POO   H02 PDO|             |
                           |-------------|-------------|-------------|             |-------------|
                      15:45|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      16:35|             |TIC   F06    |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      17:20|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      
                      -- Horaire Prof. Pier Donini (PDO)
                           | Lun         | Mar         | Mer         | Jeu         | Ven         |
                           |-------------|-------------|-------------|-------------|-------------|
                       8:30|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                       9:15|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      10:25|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      11:15|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      12:00|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      13:15|             |             |POO   H02 PDO|POO   H02 PDO|             |
                           |-------------|-------------|             |             |-------------|
                      14:00|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      14:55|             |             |             |POO   H02 PDO|             |
                           |-------------|-------------|-------------|             |-------------|
                      15:45|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      16:35|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      17:20|             |             |             |             |             |
                           |-------------|-------------|-------------|-------------|-------------|
                      """;

        Ecole.main(new String[]{});

        assertLinesMatch(expected.lines(), outputStreamCaptor.toString().lines());

        System.setOut(standardOut);
    }
}